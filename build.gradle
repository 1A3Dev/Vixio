plugins {
    id "com.github.johnrengelman.shadow" version "1.2.4"
    id 'com.github.ben-manes.versions' version '0.13.0'
    id "de.undercouch.download" version "3.1.2"
    id 'java'
}

group 'me.iblitzkriegi.vixio'
version '1.0-SNAPSHOT'

apply plugin: 'java'

sourceCompatibility = 1.8

repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
    maven {
        name 'spigot-repo'
        url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/org/spigotmc/spigot-api/'}
    maven{ url 'http://maven.sedmelluq.com'}
}
import org.apache.tools.ant.filters.ReplaceTokens

group = project.property("groupId")
version = project.property("version")
sourceCompatibility = project.property("sourceversion")

configurations {
    plugins {
        description = 'dependencies that need to be present for compilation and on the server, but not in it\'s classpath'
        transitive = true
    }

    providedServer {
        description = 'dependencies that need to be present for compilation and on the server'
        transitive = true
    }

    provided {
        description = 'dependencies that only need to be present for compilation'
        transitive = true

        extendsFrom providedServer
        extendsFrom plugins
    }

    compileOnly.extendsFrom provided

    serverOnly {
        description = 'dependencies that only need to be present for on the server'
        transitive = true

        extendsFrom providedServer
        exclude group: 'org.spigotmc', module: 'spigot-api'
    }
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile 'org.spigotmc:spigot-api:1.8.8-R0.1-SNAPSHOT'
    compile 'net.dv8tion:JDA:3.2.0_228'
    compile 'com.sedmelluq:lavaplayer:1.2.42'
    compile 'ca.pjer:chatter-bot-api:2.0.1'
    compile 'com.vdurmont:emoji-java:3.1.3'
    plugins fileTree(dir: 'libs/plugins', include: '*.jar')


}

shadowJar {
    classifier = ''
    relocate 'org.apache.commons.lang3', project.group + ".org.apache.commons.lang3"
    relocate 'org.apache.http', project.group + ".org.apache.http"
    relocate 'org.apache.commons.io', project.group + ".org.apache.commons.io"
    archiveName = 'Vixio-1.1.4.jar'
    destinationDir = new File("C:\\Users\\matthew\\Desktop\\VixioSk\\plugins")
}

processResources {
    from ('src/main/java') {
        include 'plugin.yml'
    }

    filter ReplaceTokens, tokens: [
            "apiversion": project.property("apiversion"),
            "name"   : project.property("name"),
            "mainClass"   : project.property("mainClass"),
            "version"   : project.property("version")
    ]
}
